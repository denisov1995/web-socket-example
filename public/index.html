<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —á–∞—Ç</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="chat.js" defer></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="shortcut icon" href="./2161443.png" type="image/x-icon">
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
      }
      #chat {
        border: 1px solid #ccc;
        padding: 10px;
        max-height: 300px;
        overflow-y: auto;
        margin-bottom: 10px;
      }
      #login,
      #register {
        margin-bottom: 20px;
      }
      .msg {
        margin: 5px 0;
      }
      .avatar {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        vertical-align: middle;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <div id="auth">
      <div id="register">
        <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
        <input id="regName" placeholder="–ò–º—è" />
        <input id="regPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
        <label>–ê–≤–∞—Ç–∞—Ä:</label>
        <input type="file" id="regAvatar" accept="image/*" />

        <!-- <input id="regAvatar" type="file" /> -->
        <button onclick="register()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      </div>

      <div id="login">
        <h3>–í—Ö–æ–¥</h3>
        <input id="logName" placeholder="–ò–º—è" />
        <input id="logPass" type="password" />
        <button onclick="login()">–í–æ–π—Ç–∏</button>
      </div>
    </div>

    <div id="chatUI" style="display: none">
      <div id="publicChatContainer">
        <h3 onclick="togglePublicChat()" style="cursor: pointer">
          –û–±—â–∏–π —á–∞—Ç ‚ñ∏
        </h3>

        <div id="publicChatContent" style="display: none">
          <div id="publicChat" class="chat-box"></div>
          <input
            type="text"
            id="publicInput"
            placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –≤ –æ–±—â–∏–π —á–∞—Ç"
          />
          <button onclick="sendPublicMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
      </div>

      <div class="desktop-wrapper" id="privateChatContainer">
        <h3 onclick="togglePrivateChat()" style="cursor: pointer">
          –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç ‚ñ∏
        </h3>
        <div id="privateChatContent" style="display: none">
          <div id="users"></div>
          <div class="chat-wrapper">
            <div id="chat"></div>
            <div
              id="typingIndicator"
              style="font-style: italic; color: gray"
            ></div>
            <input id="msgInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" />
            <input type="file" id="imgInput" accept="image/*" />
            <button onclick="sendImage()">üì∑ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</button>

            <button disabled id="sendBtn" onclick="sendMessage()">
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
